@(form: play.data.Form[models.User])

@main("color-theme-4"){

    <meta name="google-signin-client_id" content="663005661536-pp51ti02kemqet83v8imdjobnl9qddfs.apps.googleusercontent.com">

    <div class="row">
        <div id="loginHeader" class="col-md-4 col-md-offset-4">
            <h1>Login to Morris</h1>
        </div>
    </div>
    
    <div class="row">
        <div class="well col-md-6 col-md-offset-3">
        @helper.form(routes.AuthenticationController.authenticate) {
            @if(form.hasGlobalErrors) {
                <div class="alert alert-success">
                    @form.globalError.message
                </div>
            }
            
            <div class="form-group">
                <label for="email">Email address</label>
                <input type="email" class="form-control" name="email" id="email" placeholder="Enter email" value="@form("email").value">
            </div>
            
            <div class="form-group">
                <label for="password">Password</label>
                <input type="password" class="form-control" name="password" id="password" placeholder="Password">
            </div>
            
            <div class="btn-group">
                <button type="submit" class="btn btn-default">Submit</button>
                <a type="button" class="btn btn-default" href="@routes.AuthenticationController.signup">
                    Signup as new User</a>

            </div>

        }
            <template id="awareness" is="dom-bind">
                <google-signin width="wide"></google-signin>
                <google-signin-aware
                brand="google"
                client-id="393641479312-mungbg04e9cmkooq11n3u9bci7ac752a.apps.googleusercontent.com"
                on-google-signin-aware-error="handleSignInError"
                on-google-signin-aware-success="handleSignIn"
                on-google-signin-aware-signed-out="handleSignOut"
                ></google-signin-aware>
            </template>
        </div>
        <script>
                var aware = document.querySelector('#awareness');

                aware.handleSignInError = function (event) {
                    this.status = JSON.stringify(event.detail);
                };

                aware.handleSignIn = function (response) {
                    var username = gapi.auth2.getAuthInstance().currentUser.get().getBasicProfile().getEmail();
                    console.log("Username: " + username);
                    $.ajax(jsRoutes.controllers.AuthenticationController.googleLogin(username));
                };

                aware.handleSignOut = function (response) {
                    $.ajax(jsRoutes.controllers.AuthenticationController.logout());
                };
        </script>
    </div>
}